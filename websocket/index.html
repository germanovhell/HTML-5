<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Práctica Web Socket</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link href="css/style.css" rel="stylesheet">-->
    </head>
    <body>
        <input type="text" id="mensaje" placeholder="Escrive tu mensaje">
        <button id="enviar_mensaje">Enviar mensaje</button>
        <script>
            var host = "ws://localhost:8000/websocket/server.php";
            var socket;

            window.addEventListener("load", init);
            function init(){
                socket = new WebSocket(host);
                socket.addEventListener("open", function(e){
                console.log("Se inició la comunicación con el servidor");
                document.querySelector("#enviar_mensaje").addEventListener("click", function(){
                    socket.send(document.getElementById("mensaje").value);
                    },false);
                    },false);

                    socket.addEventListener("message", function(msg){
                    console.log(msg.data);
                },false);
            }
        </script>
    </body>
</html>